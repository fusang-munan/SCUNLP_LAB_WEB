# 样式与主题定制

本文档说明如何修改视觉样式，包括SCSS结构、主题配色、样式覆盖规则等。

## SCSS 文件结构

```
assets/scss/
├── custom.scss       # 主要自定义样式（人员卡片、论文详情等）
├── template.scss     # 模板级样式（标题对齐、CTA居中等）
└── contact.scss      # 联系页专用样式
```

### 加载顺序

```
Hugo Blox 默认样式（Bootstrap 5 + 主题样式）
    ↓
assets/scss/template.scss
    ↓
assets/scss/custom.scss
    ↓
assets/scss/contact.scss
```

后加载的样式会覆盖先加载的同名规则。

## 主题配色

### 主题文件

位置：`data/themes/scu.toml`

```toml
name = "SCU"

[light]
  # 主色调
  primary = "#3f51b5"
  
  # 导航栏
  menu_primary = "#3f51b5"      # 导航栏背景
  menu_text = "#fff"            # 导航栏文字
  menu_text_active = "#ffeb3b"  # 导航栏激活项
  menu_title = "#fff"           # 站点标题颜色
  
  # 首页区块
  home_section_odd = "rgb(255, 255, 255)"   # 奇数区块背景
  home_section_even = "rgb(247, 247, 247)"  # 偶数区块背景

[dark]
  primary = "hsl(339, 90%, 68%)"
  menu_primary = "rgb(20, 22, 34)"
  menu_text = "rgba(255,255,255,0.6)"
  menu_text_active = "rgba(255,255,255,1)"
  menu_title = "#fff"
  home_section_odd = "hsla(231, 15%, 18%, 1)"
  home_section_even = "hsla(231, 15%, 16%, 1)"
```

### 启用主题

在 `config/_default/params.yaml` 中配置：

```yaml
appearance:
  theme_day: scu      # 日间主题（对应 data/themes/scu.toml）
  theme_night: scu    # 夜间主题
  font: native        # 字体方案
  font_size: L        # 字体大小（S/M/L/XL）
```

### 可用字体方案

| 值 | 说明 |
|------|------|
| `native` | 系统原生字体（推荐，加载快） |
| `minimal` | 简洁衬线字体 |
| `classic` | 经典学术字体 |
| `rose` | 优雅字体 |
| `mr_robot` | 等宽字体 |

## 样式覆盖规则

### 覆盖原则

1. **优先使用 custom.scss** — 所有自定义样式放这里
2. **利用CSS特异性** — 添加更具体的选择器
3. **必要时用 !important** — 但应尽量避免

### 常用覆盖模式

```scss
// 1. 直接覆盖类名
.navbar {
  background-color: #3f51b5;
}

// 2. 增加特异性
body .navbar .nav-link {
  color: white;
}

// 3. 使用父元素限定
.home-section .section-heading {
  text-align: center;
}

// 4. 必要时使用 !important
.article-title {
  font-size: 2rem !important;
}
```

## 当前自定义样式解析

### 首页背景区高度

```scss
// assets/scss/custom.scss
.wdiasda {
  width: 100%;
  height: 550px;
}
```

`.wdiasda` 是首页markdown block的自定义CSS类，在 `content/zh/_index.md` 中配置：

```yaml
- block: markdown
  design:
    css_class: wdiasda
    background:
      image:
        filename: 川大初雪.jpg
```

### 人员卡片样式

```scss
// 卡片容器
.people-person-card {
  display: flex;
  justify-content: center;
}

// 卡片本体
.person-card {
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 20px;
  text-align: center;
  transition: box-shadow 0.3s ease;
  width: 100%;
  max-width: 280px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.person-card:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

// 头像
.person-card-avatar img {
  width: 150px;
  height: 150px;
  object-fit: cover;
}

// 姓名
.person-card-name {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 8px;
  text-align: center;
}

// 角色
.person-card-role {
  color: #666;
  font-size: 0.95rem;
  margin-bottom: 12px;
  text-align: center;
}

// 研究兴趣
.person-card-interests {
  margin-bottom: 12px;
  font-size: 0.9rem;
}

.person-card-interests ul {
  margin: 0;
  padding-left: 20px;
  list-style-type: disc;
}

// 响应式
@media (max-width: 768px) {
  .person-card {
    max-width: 100%;
  }
}
```

### 论文详情页样式

```scss
.pub {
  // 标题区
  .article-header {
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid #e0e0e0;
  }

  .article-title {
    font-size: 1.75rem;
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: 1rem;
    color: #2c3e50;
  }

  .article-title-link {
    color: #2c3e50;
    text-decoration: none;
    transition: color 0.2s ease;
    
    &:hover {
      color: #0066cc;
      text-decoration: underline;
    }
  }

  // 作者
  .article-authors {
    font-size: 1rem;
    color: #555;
    margin-bottom: 0.75rem;
    line-height: 1.6;
  }

  // 摘要
  .pub-abstract {
    font-size: 1rem;
    line-height: 1.7;
    color: #444;
    text-align: justify;
  }

  // 链接按钮
  .pub-link {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.4rem 0.8rem;
    background-color: #f8f9fa;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    color: #0066cc;
    text-decoration: none;
    font-size: 0.9rem;
    transition: all 0.2s ease;
    
    &:hover {
      background-color: #e9ecef;
      border-color: #0066cc;
    }
  }

  // 响应式
  @media (max-width: 768px) {
    .article-title {
      font-size: 1.5rem;
    }
    
    .pub-link {
      width: 100%;
      justify-content: center;
    }
  }
}
```

### 隐藏页脚社交图标

```scss
.site-footer .social-icons,
.site-footer .network-icon,
.footer-social {
  display: none !important;
}
```

## 常见样式定制

### 修改导航栏

```scss
// 导航栏背景
.navbar {
  background-color: #your-color !important;
}

// 导航栏高度
.navbar {
  min-height: 70px;
}

// Logo大小
.navbar-brand img {
  height: 50px;
}

// 菜单项样式
.navbar .nav-link {
  font-weight: 500;
  padding: 0.5rem 1rem;
}
```

### 修改页脚

```scss
.site-footer {
  background-color: #2c3e50;
  color: #fff;
  padding: 2rem 0;
}

.site-footer a {
  color: #fff;
  text-decoration: underline;
}
```

### 修改首页区块间距

```scss
.home-section {
  padding: 4rem 0;
}

.home-section:first-of-type {
  padding-top: 2rem;
}
```

### 修改标题样式

```scss
// 页面大标题
.article-title, 
.page-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: #2c3e50;
}

// Section标题
.section-heading h1 {
  font-size: 2rem;
  border-bottom: 2px solid var(--color-primary);
  padding-bottom: 0.5rem;
}
```

### 修改卡片样式

```scss
// 通用卡片
.card {
  border: none;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 12px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }
}
```

### 修改按钮样式

```scss
.btn-primary {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  border-radius: 25px;
  padding: 0.75rem 2rem;
  
  &:hover {
    background-color: darken(#3f51b5, 10%);
  }
}
```

## CSS变量

Hugo Blox注入的CSS变量（可在样式中使用）：

```scss
// 主色调
var(--color-primary)

// 文字颜色
var(--color-text)
var(--color-text-muted)

// 背景色
var(--color-bg)
var(--color-bg-alt)

// 链接色
var(--color-link)
var(--color-link-hover)
```

使用示例：

```scss
.my-element {
  color: var(--color-primary);
  background-color: var(--color-bg-alt);
}
```

## 响应式断点

Hugo Blox使用Bootstrap 5的断点：

| 断点 | 宽度 |
|------|------|
| xs | < 576px |
| sm | >= 576px |
| md | >= 768px |
| lg | >= 992px |
| xl | >= 1200px |
| xxl | >= 1400px |

```scss
// 移动端样式
@media (max-width: 767.98px) {
  .my-element {
    font-size: 14px;
  }
}

// 桌面端样式
@media (min-width: 992px) {
  .my-element {
    font-size: 18px;
  }
}
```

## 调试技巧

### 浏览器开发者工具

1. 右键元素 → 检查
2. 在Styles面板查看当前样式
3. 找到需要覆盖的规则和选择器
4. 在custom.scss中编写覆盖规则

### 强制刷新

修改SCSS后如果不生效：

```bash
# 清理Hugo缓存
hugo mod clean

# 重启开发服务器
hugo server -D
```

### 临时调试样式

在浏览器开发者工具中直接修改样式测试效果，确认后再写入SCSS文件。

## 最佳实践

1. **集中管理** — 所有自定义样式放在 `custom.scss`
2. **注释说明** — 为每个样式块添加注释
3. **避免 !important** — 尽量通过增加选择器特异性解决
4. **使用变量** — 利用CSS变量保持一致性
5. **移动优先** — 先写移动端样式，再用媒体查询扩展
6. **测试多设备** — 确保在不同屏幕尺寸下表现正常

## 文档结束

至此，所有技术文档编写完成。文档列表：

1. README.md — 项目总览与快速启动
2. 01-Hugo基础入门.md — Hugo核心概念
3. 02-Hugo-Blox框架说明.md — Block机制与组件
4. 03-项目架构详解.md — 本项目具体实现
5. 04-模板与布局定制.md — 模板覆盖与编写
6. 05-样式与主题定制.md — 样式修改指南
